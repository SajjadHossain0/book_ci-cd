<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"> <!-- Thymeleaf-এর namespace -->
<head>
    <meta charset="UTF-8">
    <title>Update Book</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<!-- 🔼 হেডার অংশ ফ্র্যাগমেন্ট আকারে ইনসার্ট -->
<div th:insert="~{fragments :: header}"></div>

<div class="container">
    <h2>Update Book</h2> <!-- এখানে 'Update Book' লিখা উচিত, কারণ এটা আপডেট ফর্ম -->

    <!-- 🔁 Form এর মাধ্যমে ব্যাকএন্ডে পাঠানো হবে -->
    <!-- th:object="${book}" মানে এই ফর্ম BookDto নামের অবজেক্টের সাথে bind -->
    <!-- th:action="@{/saveBook}" মানে সাবমিট করলে /saveBook URL-এ POST হবে -->
    <form th:action="@{/saveBook}" th:object="${book}" method="post" class="row g-3">

        <!-- 🔒 Hidden Field: Book ID যাতে update করতে পারি -->
        <input type="hidden" th:field="*{id}"/>

        <!-- 🔹 Title Field -->
        <div class="col-md-6">
            <label class="form-label">Title</label>
            <input type="text" th:field="*{title}" class="form-control" required/>
        </div>

        <!-- 🔹 Author Field -->
        <div class="col-md-6">
            <label class="form-label">Author</label>
            <input type="text" th:field="*{author}" class="form-control" required/>
        </div>

        <!-- 🔹 ISBN Field -->
        <div class="col-md-6">
            <label class="form-label">ISBN</label>
            <input type="text" th:field="*{isbn}" class="form-control" required/>
        </div>

        <!-- 🔹 Category Dropdown -->
        <!-- Loop করে ক্যাটেগরি দেখানো হচ্ছে -->
        <div class="col-md-6">
            <label class="form-label">Category</label>
            <select th:field="*{categoryId}" class="form-select" required>
                <option value="">--Select Category--</option>
                <!-- প্রতিটি ক্যাটেগরি অপশন হিসেবে দেখানো -->
                <option th:each="cat : ${categories}"
                        th:value="${cat.id}"
                        th:text="${cat.name}">
                </option>
            </select>
        </div>

        <!-- ✅ Submit এবং Back বাটন -->
        <div class="col-12">
            <button type="submit" class="btn btn-success">Update</button>
            <a th:href="@{/}" class="btn btn-secondary">Back</a>
        </div>
    </form>
</div>
</body>
</html>
